![1770031819275](image/README/1770031819275.png)![1770031821059](image/README/1770031821059.png)![1770031826110](image/README/1770031826110.png)![1770031827248](image/README/1770031827248.png)![1770031831029](image/README/1770031831029.png)![1770031831241](image/README/1770031831241.png)![1770031831737](image/README/1770031831737.png)# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—É—Ä–Ω–∏—Ä–∞–º–∏ –ø–æ —Ñ–∏–≥—É—Ä–Ω–æ–º—É –∫–∞—Ç–∞–Ω–∏—é

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π –ø–æ —Ñ–∏–≥—É—Ä–Ω–æ–º—É –∫–∞—Ç–∞–Ω–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–æ—Ä–º–∞—Ç–∞ ISUCalcFS.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö](#–∏–º–ø–æ—Ä—Ç-–¥–∞–Ω–Ω—ã—Ö)
- [–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ](#–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è:
- –ò–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π –∏–∑ XML —Ñ–∞–π–ª–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∞ ISUCalcFS
- –•—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞—Ö, –∫–ª—É–±–∞—Ö, —Ç—Ä–µ–Ω–µ—Ä–∞—Ö, —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º

**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:** ISUCalcFS 3.7.6 (–ø—Ä–∞–≤–∏–ª–∞ ISU —Å–µ–∑–æ–Ω–∞ 2021-2022)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –ò–º–ø–æ—Ä—Ç XML —Ñ–∞–π–ª–æ–≤ –∏–∑ ISUCalcFS
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö, –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö, —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –∫–∞—Ç–∞–Ω–∏—è, –ø–∞—Ä –∏ —Ç–∞–Ω—Ü–µ–≤ –Ω–∞ –ª—å–¥—É
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫ —Å—É–¥–µ–π (GOE) —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞–º, –∫–ª—É–±–∞–º, —Ç—Ä–µ–Ω–µ—Ä–∞–º
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- üì§ –ò–º–ø–æ—Ä—Ç XML —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üìä –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets
- üîÑ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- üìà –ê–Ω–∞–ª–∏–∑ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∫–∞—Ç–∞–Ω–∏—è
- üèÜ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–∞–º–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- **Flask 2.3.3** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy 2.0.23** - ORM
- **Flask-Migrate 4.0.5** - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **Flask-CORS 4.0.0** - CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Flask-Limiter 3.5.0** - rate limiting
- **Redis 5.0.1** - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è rate limiting
- **ReportLab 4.0.7** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
- **gspread 6.0.0** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **SQLite** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **PostgreSQL** (–¥–ª—è production)

### Frontend
- HTML/CSS/JavaScript
- Bootstrap (—á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω—ã)

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è production)
- PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è production)

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone <repository-url>
cd calc.figurebase.ru
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# –∏–ª–∏
.venv\Scripts\activate  # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite:///instance/figure_skating.db

# –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_password

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
SECRET_KEY=your_secret_key_here

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
LOG_FILE=logs/app.log

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
UPLOAD_FOLDER=uploads
MAX_CONTENT_LENGTH=16777216

# Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è production)
REDIS_URL=redis://localhost:6379/0

# –°–µ—Å—Å–∏–∏
SESSION_TIMEOUT=3600
SESSION_COOKIE_SECURE=0  # 1 –¥–ª—è HTTPS
```

5. **–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
```bash
python scripts/create_database.py
```

6. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
python app.py

# –î–ª—è production (—Å Gunicorn)
gunicorn -w 4 -b 0.0.0.0:5000 wsgi:app
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `DATABASE_URL` | URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `sqlite:///figure_skating.db` |
| `ADMIN_USERNAME` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ | `admin` |![1770031836187](image/README/1770031836187.png)![1770031845491](image/README/1770031845491.png)
| `ADMIN_PASSWORD` | –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ | - |
| `SECRET_KEY` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Flask | –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` |
| `LOG_FILE` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤ | `logs/app.log` |
| `UPLOAD_FOLDER` | –ü–∞–ø–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ | `uploads` |
| `REDIS_URL` | URL Redis –¥–ª—è rate limiting | –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| `SESSION_TIMEOUT` | –¢–∞–π–º–∞—É—Ç —Å–µ—Å—Å–∏–∏ (—Å–µ–∫—É–Ω–¥—ã) | `3600` |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis

–î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –¥–ª—è rate limiting. –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ [docs/REDIS_SETUP.md](docs/REDIS_SETUP.md).

**–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# Ubuntu/Debian
sudo apt install redis-server
sudo systemctl start redis-server

# –í .env
REDIS_URL=redis://localhost:6379/0
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:5000`

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
- `/` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `/athletes` - —Å–ø–∏—Å–æ–∫ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
- `/clubs` - —Å–ø–∏—Å–æ–∫ –∫–ª—É–±–æ–≤
- `/coaches` - —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–Ω–µ—Ä–æ–≤
- `/events` - —Å–ø–∏—Å–æ–∫ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
- `/categories` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `/analytics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

**–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
- `/admin` - –≤—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `/admin/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ XML —Ñ–∞–π–ª–æ–≤
- `/admin/export-google-sheets` - —ç–∫—Å–ø–æ—Ä—Ç –≤ Google Sheets

### API

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoints:**
- `GET /api/athletes` - —Å–ø–∏—Å–æ–∫ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
- `GET /api/athletes/<id>` - –¥–∞–Ω–Ω—ã–µ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞
- `GET /api/athletes/<id>/performance-details` - –¥–µ—Ç–∞–ª–∏ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π
- `GET /api/clubs` - —Å–ø–∏—Å–æ–∫ –∫–ª—É–±–æ–≤
- `GET /api/events` - —Å–ø–∏—Å–æ–∫ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
- `GET /api/categories` - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### Event (–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—É—Ä–Ω–∏—Ä–∞—Ö
- –°–≤—è–∑—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

#### Category (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)
- –í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã
- –¢–∏–ø—ã: Singles (S), Pairs (P), Dance (D)
- –£—Ä–æ–≤–Ω–∏: –º–∞—Å—Ç–µ—Ä–∞ (m), —Ä–∞–∑—Ä—è–¥—ã (1, 2, 3)

#### Athlete (–°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã)
- –î–∞–Ω–Ω—ã–µ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–∏–∫–æ–≤ –∏ –ø–∞—Ä
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ `external_id` –∏–ª–∏ –∏–º–µ–Ω–∏+–¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è

#### Club (–ö–ª—É–±—ã)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª—É–±–∞—Ö/—à–∫–æ–ª–∞—Ö
- –°–≤—è–∑—å —Å–æ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞–º–∏

#### Coach (–¢—Ä–µ–Ω–µ—Ä—ã)
- –î–∞–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–µ—Ä–æ–≤
- –°–≤—è–∑—å —Å–æ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞–º–∏

#### Participant (–£—á–∞—Å—Ç–Ω–∏–∫–∏)
- –°–≤—è–∑—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º

#### Performance (–í—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è)
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π
- –≠–ª–µ–º–µ–Ω—Ç—ã —Å –æ—Ü–µ–Ω–∫–∞–º–∏ —Å—É–¥–µ–π
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã

#### Element (–≠–ª–µ–º–µ–Ω—Ç—ã)
- –î–µ—Ç–∞–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π
- –û—Ü–µ–Ω–∫–∏ —Å—É–¥–µ–π (GOE) –≤ –≤–∏–¥–µ –∫–æ–¥–æ–≤ 0-15
- –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –∏—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª

### –°—Ö–µ–º–∞ —Å–≤—è–∑–µ–π

```
Event
 ‚îú‚îÄ‚îÄ Category
 ‚îÇ    ‚îú‚îÄ‚îÄ Segment
 ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ Performance
 ‚îÇ    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ Element (—Å –æ—Ü–µ–Ω–∫–∞–º–∏ —Å—É–¥–µ–π)
 ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ JudgePanel
 ‚îÇ    ‚îî‚îÄ‚îÄ Participant
 ‚îÇ         ‚îî‚îÄ‚îÄ Athlete
 ‚îÇ              ‚îú‚îÄ‚îÄ Club
 ‚îÇ              ‚îî‚îÄ‚îÄ Coach
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ë–î: [docs/ISUCalcFS_DATABASE_GUIDE.md](docs/ISUCalcFS_DATABASE_GUIDE.md)

---

## –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç XML —Ñ–∞–π–ª–æ–≤

–°–∏—Å—Ç–µ–º–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç XML —Ñ–∞–π–ª—ã —Ñ–æ—Ä–º–∞—Ç–∞ ISUCalcFS –≤–µ—Ä—Å–∏–∏ 3.7.6.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ XML:**
```xml
<ISUCalcFS>
  <Event>
    <Categories_List>
      <Category>
        <Segments_List>
          <Segment>
            <Participants_List>
              <Participant>
                <Person_Couple_Team>
                  <Team_Members>  <!-- –î–ª—è –ø–∞—Ä -->
                    <Person/>
                  </Team_Members>
                  <Club/>
                </Person_Couple_Team>
                <PlannedElements/>
              </Participant>
            </Participants_List>
            <Performance_List>
              <Performance/>  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π -->
            </Performance_List>
          </Segment>
        </Segments_List>
      </Category>
    </Categories_List>
  </Event>
</ISUCalcFS>
```

### –ü—Ä–æ—Ü–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞

1. **–ó–∞–≥—Ä—É–∑–∫–∞ XML —Ñ–∞–π–ª–∞** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`/admin/upload`)
2. **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö:**
   - –°–æ–±—ã—Ç–∏—è –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –£—á–∞—Å—Ç–Ω–∏–∫–∏ (–æ–¥–∏–Ω–æ—á–Ω–∏–∫–∏, –ø–∞—Ä—ã, —Ç–∞–Ω—Ü—ã)
   - –ö–ª—É–±—ã –∏ —Ç—Ä–µ–Ω–µ—Ä—ã
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π
   - –≠–ª–µ–º–µ–Ω—Ç—ã —Å –æ—Ü–µ–Ω–∫–∞–º–∏ —Å—É–¥–µ–π
3. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è:**
   - –°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã –ø–æ `external_id` –∏–ª–∏ –∏–º–µ–Ω–∏+–¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è
   - –ö–ª—É–±—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
   - –¢—Ä–µ–Ω–µ—Ä—ã –ø–æ –∏–º–µ–Ω–∏
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î**

### –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ GOE (Grade of Execution)

–û—Ü–µ–Ω–∫–∏ —Å—É–¥–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ XML –∫–∞–∫ –∫–æ–¥—ã 0-15 –∏ –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏:

| –ö–æ–¥ | GOE | –§–æ—Ä–º—É–ª–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-----|---------|----------|
| 0 | -5 | -5 | –û—á–µ–Ω—å –ø–ª–æ—Ö–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ |
| 1-7 | -3 –¥–æ +3 | code - 4 | –û—Å–Ω–æ–≤–Ω–∞—è —à–∫–∞–ª–∞ |
| 8 | +4 | +4 | –û—Ç–ª–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ |
| 9 | None | None | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| 10 | +5 | +5 | –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ |
| 11 | -5 | code - 16 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| 12 | -4 | code - 16 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| 13 | +4 | code - 9 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| 14 | +5 | code - 9 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| 15 | -1 | code - 16 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ |

**–í–∞–∂–Ω–æ:** –û—Ü–µ–Ω–∫–∏ —Å—É–¥–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î –∫–∞–∫ –∫–æ–¥—ã (0-15), –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ API.

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/GOE_DECODING.md](docs/GOE_DECODING.md)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞

#### –û–¥–∏–Ω–æ—á–Ω–∏–∫–∏ vs –ü–∞—Ä—ã
- **–û–¥–∏–Ω–æ—á–Ω–∏–∫–∏:** `PCT_TYPE="PER"`, –¥–∞–Ω–Ω—ã–µ –≤ `<Person_Couple_Team>`
- **–ü–∞—Ä—ã/–¢–∞–Ω—Ü—ã:** `PCT_TYPE="COU"`, –¥–∞–Ω–Ω—ã–µ –≤ `<Team_Members>` —Å –¥–≤—É–º—è `<Person>`

#### –ö–ª—É–±—ã
- –£ –æ–¥–∏–Ω–æ—á–Ω–∏–∫–æ–≤: –¥–∞–Ω–Ω—ã–µ –≤ `<Club>` –≤–Ω—É—Ç—Ä–∏ `<Person_Couple_Team>`
- –£ –ø–∞—Ä: `<Club>` —á–∞—Å—Ç–æ –ø—É—Å—Ç–æ–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `PAR_CLBID` –∏–∑ `<Participant>`
- **–í–∞–∂–Ω–æ:** –ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–ª—É–±–∞ –ø—É—Å—Ç—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏!

#### –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: `PCT_EXTDT` (–≤–Ω–µ—à–Ω–∏–π ID)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò–º—è + –§–∞–º–∏–ª–∏—è + –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–æ—è–≤–ª–µ–Ω–∏–∏: –º–µ—Ä–∂ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å!)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/ISUCalcFS_PARSER_GUIDE.md](docs/ISUCalcFS_PARSER_GUIDE.md)

---

## –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è GOE):

1. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**
```bash
cp instance/figure_skating.db instance/figure_skating.db.backup.$(date +%Y%m%d_%H%M%S)
```

2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
sudo systemctl stop calc-figurebase
```

3. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –ë–î**
```bash
rm instance/figure_skating.db
```

4. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ë–î**
```bash
python scripts/create_database.py
```

5. **–ò–º–ø–æ—Ä—Ç XML —Ñ–∞–π–ª–æ–≤** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

6. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
sudo systemctl start calc-figurebase
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [docs/DATABASE_RECREATION.md](docs/DATABASE_RECREATION.md)

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ `sqlite3.OperationalError: attempt to write a readonly database`:

```bash
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è gunicorn
ps aux | grep gunicorn | grep calc.figurebase

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ (–¥–ª—è www-data)
chown www-data:www-data instance/figure_skating.db
chown www-data:www-data instance/
chmod 664 instance/figure_skating.db
chmod 775 instance/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ü–µ–Ω–æ–∫ —Å—É–¥–µ–π:**
```sql
SELECT 
    e.id,
    e.order_num,
    e.executed_code,
    json_extract(e.judge_scores, '$.J01') as j01_code,
    json_extract(e.judge_scores, '$.J02') as j02_code,
    json_extract(e.judge_scores, '$.J03') as j03_code
FROM element e
WHERE e.judge_scores IS NOT NULL
LIMIT 10;
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `j01_code`, `j02_code`, `j03_code` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å–ª–∞–º–∏ –æ—Ç 0 –¥–æ 15 (–∏–ª–∏ NULL –¥–ª—è –∫–æ–¥–∞ 9).

---

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
calc.figurebase.ru/
‚îú‚îÄ‚îÄ app_factory.py          # –§–∞–±—Ä–∏–∫–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ models.py               # –ú–æ–¥–µ–ª–∏ –ë–î
‚îú‚îÄ‚îÄ extensions.py          # –†–∞—Å—à–∏—Ä–µ–Ω–∏—è Flask
‚îú‚îÄ‚îÄ routes/                 # –ú–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ public.py          # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ admin.py           # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ api.py             # API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ analytics.py       # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ parsers/               # –ü–∞—Ä—Å–µ—Ä—ã XML
‚îÇ   ‚îî‚îÄ‚îÄ isu_calcfs_parser.py
‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ import_service.py
‚îÇ   ‚îú‚îÄ‚îÄ athlete_registry.py
‚îÇ   ‚îú‚îÄ‚îÄ club_registry.py
‚îÇ   ‚îî‚îÄ‚îÄ pdf_generator.py
‚îú‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ normalizers.py
‚îÇ   ‚îú‚îÄ‚îÄ formatters.py
‚îÇ   ‚îî‚îÄ‚îÄ auth.py
‚îú‚îÄ‚îÄ scripts/               # –°–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ create_database.py
‚îú‚îÄ‚îÄ templates/             # HTML —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ static/                # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
flask db migrate -m "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
flask db upgrade

# –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
flask db downgrade
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)
pytest

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
flake8 .
black --check .
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª, —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ `LOG_FILE` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `logs/app.log`).

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `DEBUG` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `INFO` - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ
- `WARNING` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –æ—à–∏–±–∫–∏
- `CRITICAL` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [DATABASE_RECREATION.md](docs/DATABASE_RECREATION.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—é –ë–î
- [GOE_DECODING.md](docs/GOE_DECODING.md) - –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ GOE –æ—Ü–µ–Ω–æ–∫
- [ISUCalcFS_DATABASE_GUIDE.md](docs/ISUCalcFS_DATABASE_GUIDE.md) - –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î ISUCalcFS
- [ISUCalcFS_PARSER_GUIDE.md](docs/ISUCalcFS_PARSER_GUIDE.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–∞—Ä—Å–∏–Ω–≥—É XML
- [ISUCalcFS_XML_GUIDE.md](docs/ISUCalcFS_XML_GUIDE.md) - –§–æ—Ä–º–∞—Ç XML —Ñ–∞–π–ª–æ–≤
- [REDIS_SETUP.md](docs/REDIS_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö ISUCalcFS

**–í–µ—Ä—Å–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã:** 3.7.6  
**–ü—Ä–∞–≤–∏–ª–∞ —Å–µ–∑–æ–Ω–∞:** 2021-2022  
**–í–µ—Ä—Å–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î:** 11149  
**–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** UTF-8 (XML), CP1251 (DBF)

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ GOE:** –û—Ü–µ–Ω–∫–∏ —Å—É–¥–µ–π –∫–æ–¥–∏—Ä—É—é—Ç—Å—è —á–∏—Å–ª–∞–º–∏ 0-15, –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ
2. **–ë–æ–Ω—É—Å –∑–∞ –≤—Ç–æ—Ä—É—é –ø–æ–ª–æ–≤–∏–Ω—É:** –ü—Ä—ã–∂–∫–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–æ –≤—Ç–æ—Ä–æ–π –ø–æ–ª–æ–≤–∏–Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–ª—É—á–∞—é—Ç +10% –∫ –±–∞–∑–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
3. **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è:** –°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –ø–æ `external_id` –∏–ª–∏ –∏–º–µ–Ω–∏+–¥–∞—Ç–µ —Ä–æ–∂–¥–µ–Ω–∏—è
4. **–ö–ª—É–±—ã:** –î–∞–Ω–Ω—ã–µ –∫–ª—É–±–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö XML, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

---

## –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Systemd —Å–µ—Ä–≤–∏—Å

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/calc-figurebase.service`:

```ini
[Unit]
Description=Figure Skating Calculator Web Application
After=network.target

[Service]
User=www-data
Group=www-data
WorkingDirectory=/var/www/calc.figurebase.ru
Environment="PATH=/var/www/calc.figurebase.ru/.venv/bin"
Environment="DATABASE_URL=sqlite:///instance/figure_skating.db"
Environment="REDIS_URL=redis://localhost:6379/0"
ExecStart=/var/www/calc.figurebase.ru/.venv/bin/gunicorn -w 4 -b 127.0.0.1:5000 wsgi:app
Restart=always

[Install]
WantedBy=multi-user.target
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º:**
```bash
sudo systemctl start calc-figurebase
sudo systemctl stop calc-figurebase
sudo systemctl restart calc-figurebase
sudo systemctl status calc-figurebase
```

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```nginx
server {
    listen 80;
    server_name calc.figurebase.ru;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /static {
        alias /var/www/calc.figurebase.ru/static;
    }
}
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î:**
```bash
#!/bin/bash
BACKUP_DIR="/var/backups/calc-figurebase"
DATE=$(date +%Y%m%d_%H%M%S)
mkdir -p $BACKUP_DIR
cp /var/www/calc.figurebase.ru/instance/figure_skating.db $BACKUP_DIR/figure_skating_$DATE.db
# –•—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
find $BACKUP_DIR -name "figure_skating_*.db" -mtime +30 -delete
```

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–æ–º XML

**–û—à–∏–±–∫–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å XML"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å UTF-8)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É XML (–¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å ISUCalcFS)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f logs/app.log`

**–û—à–∏–±–∫–∞: "–î—É–±–ª–∏–∫–∞—Ç—ã —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–∫—É –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –≤ `services/athlete_registry.py`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: `scripts/list_duplicates.py`

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î

**–û—à–∏–±–∫–∞: "attempt to write a readonly database"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É –ë–î
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å gunicorn –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å

**–û—à–∏–±–∫–∞: "Database locked"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º—ã —Å Redis

**–û—à–∏–±–∫–∞: "Connection refused"**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω: `sudo systemctl status redis-server`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ `REDIS_URL`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `sudo ufw status`

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

[–£–∫–∞–∑–∞—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é]

## –ê–≤—Ç–æ—Ä—ã

[–£–∫–∞–∑–∞—Ç—å –∞–≤—Ç–æ—Ä–æ–≤]

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

[–£–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã]

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –Ø–Ω–≤–∞—Ä—å 2026
